<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        
        <title>
            Installer
        </title>
        
        <link href="//netdna.bootstrapcdn.com/bootswatch/2.1.1/cosmo/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
        <link href="//netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css" rel="stylesheet" type="text/css">

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <style>
        .ribbon {
            background-color: #a00;
            overflow: hidden;
            position: absolute;
            left: -3em;
            top: 2.5em;
            -moz-transform: rotate(-45deg);
            -webkit-transform: rotate(-45deg);
            -moz-box-shadow: 0 0 1em #888;
            -webkit-box-shadow: 0 0 1em #888;
        }
        .ribbon a {
            border: 1px solid #faa;
            color: #fff;
            display: block;
            font: bold 81.25% 'Helvetiva Neue', Helvetica, Arial, sans-serif;
            margin: 0.05em 0 0.075em 0;
            padding: 0.5em 3.5em;
            text-align: center;
            text-decoration: none;
            text-shadow: 0 0 0.5em #444;
        }
        </style>

    </head>
    <body>
        <div class="navbar">
            <div class="navbar-inner">
                <div class="container">
                    <div class="pull-right">
                        <a class="brand" href="/">Installer</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="span3">
                    <div class="well sidebar-nav">
                        <p>
                            <b>Web Server</b>
                            <label class="checkbox">
                               Apache2 <input data-parts="apache2-install,apache-modules,apache-modules-install" type="checkbox">
                            </label> 

                            <label class="checkbox">
                               Nginx <input data-parts="nginx-source,nginx-install" type="checkbox">
                            </label>
                        </p>

                        <p id="apache-modules" style="display:none">
                            <b>Apache Modules</b>

                            <label class="checkbox">
                               Rewrite <input data-parts="apache-rewrite-install" type="checkbox">
                            </label> 

                            <label class="checkbox">
                               Deflate <input data-parts="apache-deflate-install" type="checkbox">
                            </label> 

                            <label class="checkbox">
                               Headers <input data-parts="apache-headers-install" type="checkbox">
                            </label> 

                            <label class="checkbox">
                               Expires <input data-parts="apache-expires-install" type="checkbox">
                            </label> 
                        </p>

                        <p>
                            <b>Server Software</b>
                            <label class="checkbox">
                               PHP 5 <input data-parts="php5-install,php-extensions,php-extensions-install" type="checkbox">
                            </label> 

                            <label class="checkbox">
                               MySQL Server <input data-parts="mysql-server-install,php-mysql" type="checkbox">
                            </label>

                            <label class="checkbox">
                               Memcached <input data-parts="memcached-install,php-memcache" type="checkbox">
                            </label>

                            <label class="checkbox">
                               MongoDB <input data-parts="mongodb-source,mongodb-install,php-mongodb" type="checkbox">
                            </label>
                        </p>

                        <p id="php-extensions" style="display:none">
                            <b>PHP Extensions</b>

                            <label class="checkbox">
                               APC <input data-parts="php-apc-install" type="checkbox">
                            </label> 

                            <span style="display:none" id="php-mysql">
                                <label class="checkbox">
                                   MySQL <input data-parts="php-mysql-install" type="checkbox">
                                </label> 
                            </span>

                            <span style="display:none" id="php-memcache">
                                <label class="checkbox">
                                   Memcache <input data-parts="php-memcache-install" type="checkbox">
                                </label> 
                            </span>

                            <span style="display:none" id="php-mongodb">
                                <label class="checkbox">
                                   MongoDB <input data-parts="php-mongodb-install" type="checkbox">
                                </label> 
                            </span>

                            <label class="checkbox">
                               GD <input data-parts="php-gd-install" type="checkbox">
                            </label> 

                            <label class="checkbox">
                               Curl <input data-parts="php-curl-install" type="checkbox">
                            </label> 
                        </p>
                    </div>
                </div>
                <div class="span9">
                    <div class="well">

                        <div id="none_selected">
                            <h1 class="lead">Welcome to Installer</h1>
                            <p class="alert">Please use the options to the left to start</p>
                        </div>
                        
                        <div id="installer" style="background:#fff; padding:10px; border-radius:5px; border: 1px dashed #ccc; display:none">
                            <div id="nginx-source" style="display:none">
                                # Update Nginx Sources<br />
                                wget http://nginx.org/keys/nginx_signing.key<br />
                                apt-key add nginx_signing.key<br />
                                echo "deb http://nginx.org/packages/ubuntu/ precise nginx<br />
                                deb-src http://nginx.org/packages/ubuntu/ precise nginx" > /etc/apt/sources.list.d/nginx.list<br /><br />
                            </div>

                            <div id="mongodb-source" style="display:none">
                                # Update MongoDB Sources<br />
                                sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10<br />
                                echo "deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen" > /etc/apt/sources.list.d/10gen.list<br /><br />
                            </div>

                            # Update apt<br />
                            apt-get update<br /><br />

                            # Run the install<br />
                            apt-get install -y
                            <!-- Server Software -->
                            <span id="nginx-install" style="display:none">
                                 nginx
                            </span>

                            <span id="apache2-install" style="display:none">
                                 apache2
                            </span>

                            <span id="php5-install" style="display:none">
                                 php5
                            </span>

                            <span id="mysql-server-install" style="display:none">
                                 mysql-server
                            </span>

                            <span id="memcached-install" style="display:none">
                                 memcached
                            </span>

                            <span id="mongodb-install" style="display:none">
                                 mongodb-10gen
                            </span>

                            <span id="php5-install" style="display:none">
                                 php5
                            </span>

                            <!-- PHP Extensions -->
                            <span id="php-extensions-install" style="display:none">
                                <span id="php-apc-install" style="display:none">
                                     php-apc
                                </span>

                                <span id="php-memcache-install" style="display:none">
                                     php5-memcache
                                </span>

                                <span id="php-mongodb-install" style="display:none">
                                     php5-mongo
                                </span>

                                <span id="php-mysql-install" style="display:none">
                                     php5-mysql
                                </span>

                                <span id="php-gd-install" style="display:none">
                                     php5-gd
                                </span>

                                <span id="php-curl-install" style="display:none">
                                     php5-curl
                                </span>
                            </span>

                            <!-- Apache Mods -->
                            <span id="apache-modules-install" style="display:none">

                                <span id="a2enmod" style="display:none">
                                    <br /><br />
                                    # Apache Modules <br />
                                    a2enmod
                                </span>

                                <span id="apache-rewrite-install" style="display:none">
                                     rewrite
                                </span>

                                <span id="apache-deflate-install" style="display:none">
                                      deflate
                                </span>

                                <span id="apache-headers-install" style="display:none">
                                      headers
                                </span>

                                <span id="apache-expires-install" style="display:none">
                                      expires
                                </span>
                            </span>


                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="ribbon">
            <a href="https://bitbucket.org/Scottymeuk/installer" rel="me">Fork me on BitBucket</a>
        </div>

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js " type="text/javascript"></script>
       
        <script>
        $(document).ready(function() {

            var selectedInstalls = 0;

            $('input[type=checkbox]').on('change', function() {
                var elements = $(this).data('parts').split(',');
                $.each(elements, function(index, value) {
                    $('#' + value).toggle();
                });

                if (this.checked) {
                    selectedInstalls++;
                } else {
                    selectedInstalls--;
                }

                if (selectedInstalls > 0) {
                    $('#installer').show();
                    $('#none_selected').hide();
                } else {
                    $('#installer').hide();
                    $('#none_selected').show();
                }

                var a2enmods = $('#apache-modules-install span:visible').not('#a2enmod').length;

                if (a2enmods > 0) {
                    $('#a2enmod').show();
                } else {
                    $('#a2enmod').hide();
                }
            

            });
        });
        </script>

    </body>
</html>